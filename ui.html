<link rel="stylesheet" href="style.css" />

<h2>Lasso Tool</h2>
<button class="create" data-mode="lasso">Lasso Tool</button>
<button class="create" data-mode="polygonal-lasso">Polygonal Lasso Tool</button>
<button class="cancel">Cancel</button>

<script>
  let mode = null

  window.addEventListener('blur', () => {
    if (!mode) {
      return
    }
    parent.postMessage(
      {
        pluginMessage: {
          action: 'start',
          mode: 'lasso',
        },
      },
      '*',
    )
  })

  document.querySelector('.create').onclick = (e) => {
    mode = e.target.dataset.mode
  }

  document.querySelector('.cancel').onclick = () => {
    mode = null
    parent.postMessage({ pluginMessage: { action: 'cancel' } }, '*')
  }

  onmessage = (event) => {
    console.log('got this from the plugin code', event.data.pluginMessage)
  }
</script>
